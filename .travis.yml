dist: bionic
language: ruby
rvm:
- 2.5.0
before_install:
- openssl aes-256-cbc -K $encrypted_86d18cc638e6_key -iv $encrypted_86d18cc638e6_iv
  -in deploy_key.enc -out /tmp/deploy_key -d
- eval "$(ssh-agent -s)"
- chmod 600 /tmp/deploy_key
- ssh-add /tmp/deploy_key
- bundle install --path vendor/bundle
- snyk test
after_success:
- snyk monitor
- |
  if [[ $TRAVIS_BRANCH == 'master' && $TRAVIS_PULL_REQUEST == 'false' ]]; then
    bundle exec cap staging deploy
  fi
notifications:
  slack:
    matrix:
    - "<account>:<token>"
    rooms:
      secure: n3jEGRHQRdBjur6QAT5KOn77GcEeX73vyjXS6q62n90cZrr9sv/fYTAmrbYRC7iYE3NXap6ZBp8MSGa+hm2xqLXZjSutlkqe0GA+icA7jGXcSstc9t/eQmpzMe+mFi3p41Th8RojkLM9VsWCcQtlJIdq0m8dBoQgIM1Yk7tRDGkYrW9KAgb68sUFlLF9PhhjECeHal5bYFngR+IZOuKUBF1qHhLJ6lBOEhjkTZXc5tLnrIzGuzjPT6l1qAr54CgpSUuJsuQba2bjAjN1srepzjfr2m6tFGh2Ce419H6eTzFFSiNpfnYp5zJY4Fiw/gpaaj+aRW1c5fmLiz5NZHwVIOJPEjoNN+vKz5mKbUQY60igI4XQC6bxRfAa0s9u3nBH4AXeVaD4j0VIn1d3b44ypTXjXAzNzwHDBP4WaV1UWavdGCTbovgGidjs3wTfT1vKm777f51gx54KbwMy9VVfOXExVXMKes+2ApkFBHdKuLAoc9WvV3t4J5zlAijraYZ6XoRul2AyjEe0deUn7BMzdDPH1dKTo5aOhkRF1KtbGht3kGjAvNhjrPCESSsTQKSl8Qj/g7aebZ0TGcjVbTCWEsB2oWz3yTOCX/IJHJzNmT48Z9hnEzlZo/vsOqL+QLY364ECKhQI+WHUHL0dKph9WjwrUrhptsqNA6SJbKSquBg=
env:
  global:
  - secure: PPUdU60vS7Afl5eXhHZ/ETXAB+Rh01bndYGqWF5CCpMM6C0PNV/oLFY850mlZOEsqEoqS3H3iy5DfMP+FVS+WQ1ZclqjzVPpRbqjf+lHZrMDv9jxz0B1qMGNF5LFUEXI7VFyCTGVNrdIG/ZO1TtvlhLJh5OCUQHkQ0tzYeY45OgugPbzOW8vLsy7ZxWQ3XLopVixzrVKdr7AFxOFNzL2ChX1iZPIdmZHRTveaZZrzR+YZ7sjhdd9mFwWgaWGg5trScx2oZ7NrJKkB1k1qZ9fQyd1jkVU8hIy6lhdP63fdT5vKqqiNCJgBwmqH1VT3mDPxd3Q+/n6kndgc3MGqrWm5WblB9ZMu5Ryuof1qrPwwtLNcpsgkYs2zDSjsXKBeHsjCFJ9FBAD80HLx/vwrsAFGIjtZ5ID4MTnBpTd8n7EiVqLDLfGiDeEorBfwv4B9YoZ/fk5oaJVmrRXPVf5ho5FlQld7k6yLjiyPwkcmapDENE5/Eb30wEpSbqxDYcIN+P45uAe9YhyrMopJXXDWz8nX8B9h3ny3pGsopke7J3mW/7UVreZ/9JjOF7PblVHZCuYlFAPx0LBS+JqOahpQ/eaJ2j3SXMBfDZM6fX2vAHk9CV7nZhuGZkbMDy9vfJaHPGOg1wCK7uZ7DVBqL3zUNeXRhPjclQIXpjm5o0TmM8enLg=
  - secure: HokkzFm5+wJiQZkOsxPy3E5eqibJVIU+wufethOsZJji1QTGmtdNDs3KboO8guUMEkdf9MW7ozQQy9Q700UE3RJ15qXMAV0WASbnlhYt8CmGoZnTCXM92Ys/0PdMv1Ic3ca0NZhniEyt0A+QaWLpN5RmJ68Mh6ngmi8zhRp+Xj4oSmtpEuR1c2K6KKsLaXYwoo7LLB2fbeBp3u6iaKjY96JfoSnn+IOvkIepHgCxm6ql5Y/tNq9Om2Dik/D3mz1y+L7bDiduz32z7mRiafA9BkxBncQOwfcICpyrqkiSv5BsF/8B9tX4urxfzMDtJvwY/CrEK993tvjqEefbG5hkEiZGzZBrk5Q0vpPN43OFy7seePPpvPejzrSSRXHqgHsMQGInt5xx1oHM8zt490F2pMilvbjCLnmRXOf08PwulSz/NGIz+tYiXWfDsRNqpVGriOZXhetlRR6IV231xc/NQSXtsTkfE0Pei4FK9ZevweqoJpq9oKiTEX+8UUrCShMTm+9R3U/XkIjjCs5mLyILhmH6NSJGUAMtPcid5SUB95bUgdRHUJ9q801o0GJ/DT6eCzyaEBwkZ0lC3WGaCcIN5DtMjzvn5owLQV4uESWuSf9J5tS9zXE1FQE7JuC0MSxpYrnXLr0YbmlJdbYOLEUedr6W5pSyxRi/c7XBNDvokQA=
